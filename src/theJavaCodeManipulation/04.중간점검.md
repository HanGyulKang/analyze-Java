# 정리

JAVA, JVM, ClassLoader에 대해 배운 것 중에 가장 중요한건  
### ByteCode이다.

<br>

> ByteCode의 생성 과정


1. Java Compiler로 컴파일한 `.class` 파일을 **클래스 로더**가 읽는다.
   1. `.class 파일`이란?
      1. 자바 바이트 코드이다.
      2. 컴퓨터가 이해할 수 있는 언어가 아직 **아니다**.
2. **클래스 로더**가 .class 파일에서 읽은 정보들을 알맞게 메모리에 배치한다.
   1. 힙과 메서드는 모든 스레드에서 **공유하는** 자원이다.
   2. 스택, 네이티브 메서드 스택, PC는 각 스레드에서만 사용하는 자원이다.
3. 실행 엔진(`interpreter` 또는 `JIT compiler`)이 자바 바이트 코드를 읽는다.
4. 바이트 코드 실행 시 Thread가 만들어지면 **해당 Thread에 맞게** `스택, PC, 네이티브 메소드 스택`들이 만들어진다.
    1. 코드 실행 시 native code를 실행하게 되면 JNI(`Java Native Interface`)를 통해 해당 코드를 읽는다.
       1. native code란? c, c++ 또는 어셈블리어로 작성되어있는 코드
       2. java library에 생각보다 많이 들어있다.
    2. native code를 실행한 정보는 **네이티브 메소드 스택**에 쌓는다.
5. `실행엔진.Interpreter`의 경우 자바 바이트 코드를 한 줄씩 네이티브 코드로 컴파일 한다.
6. `실행엔진.JIT 컴파일러`는 **성능 최적화를 위해** 반복적으로 작동되는 코드를 미리 컴파일하여 **캐싱**해둔다. 
7. 더 이상 참조되지 않는 객체는 GC(Garbage collector)가 정리한다.

---

그리고 이 Byte code를 직접 생성하거나 조작할 수 있다...